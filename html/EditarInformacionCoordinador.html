<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CITT - Configuraci贸n Coordinador</title>
  <link rel="stylesheet" href="../css/NavBar.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body data-vista="configuracion-coordinador">

  <!-- NAVBAR externo -->
  <iframe 
    src="./NavBarCoordinador.html" 
    style="width:100%; height:100px; border:none;" 
    title="Navbar Coordinador">
  </iframe>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="reserva-contenedor">
    <h2 class="titulo-pagina"> Configuraci贸n del Sistema - Coordinador</h2>
    <p>Gestiona usuarios, inventario, reportes, aprobaciones y estad铆sticas del CITT.</p>

    <form class="modal-form" id="formConfigCoordinador" onsubmit="mostrarMensaje(event)">

      <!--  Gesti贸n de usuarios -->
      <h3 style="color: var(--color-primario); margin-top: 2rem;"> Gesti贸n de Usuarios</h3>
      <label>Selecciona acci贸n:</label>
      <select id="accionUsuario" onchange="mostrarAccionUsuario()" required>
        <option value="">Seleccionar acci贸n...</option>
        <option value="crear">Crear usuario</option>
        <option value="editar">Editar usuario</option>
        <option value="eliminar">Eliminar usuario</option>
      </select>

      <!-- Campos din谩micos seg煤n selecci贸n -->
      <div id="seccionUsuario" class="oculto">
        <!-- Crear usuario -->
        <div id="crearUsuario" class="oculto">
          <label> Nombre completo:</label>
          <input type="text" placeholder="Ej: Carlos P茅rez">
          <label> Correo institucional:</label>
          <input type="email" placeholder="carlos.perez@duocuc.cl">
          <label> Contrase帽a temporal:</label>
          <input type="password" placeholder="********">
        </div>

        <!-- Editar usuario -->
        <div id="editarUsuario" class="oculto">
          <label> Buscar usuario a editar:</label>
          <input type="text" placeholder="Ej: nombre.apellido@duocuc.cl">
          <label> Nuevo tel茅fono:</label>
          <input type="text" placeholder="Actualizar informaci贸n...">
          <label> Nuevo tel茅fono o correo:</label>
          <input type="text" placeholder="Actualizar informaci贸n...">
        </div>

        <!-- Eliminar usuario -->
        <div id="eliminarUsuario" class="oculto">
          <label> Correo del usuario a eliminar:</label>
          <input type="email" placeholder="usuario@duocuc.cl">
        </div>
      </div>

      <!--  Asignaci贸n de roles -->
      <h3 style="color: var(--color-primario); margin-top: 2rem;"> Asignaci贸n de Roles</h3>
      <label for="rolAsignado">Cambiar rol a:</label>
      <select id="rolAsignado" required>
        <option value="">Seleccionar rol...</option>
        <option>Alumno</option>
        <option>Ayudante</option>
        <option>Docente</option>
        <option>Coordinador</option>
        <option>Director</option>
      </select>


      <!-- Botones -->
      <div class="acciones-modal" style="margin-top: 2rem;">
        <button type="submit" class="btn-primario"> Guardar cambios</button>
        <a href="./PerfilCoordinador.html" class="btn-secundario">Cancelar</a>
      </div>
    </form>

    <!-- Mensaje de 茅xito -->
    <div id="popupExito" class="popup-oculto">
      <div class="popup-contenido">
        <h3> Cambios guardados</h3>
        <p>El sistema ha actualizado correctamente la configuraci贸n y la base de datos.</p>
        <a href="./PerfilCoordinador.html" class="btn-primario">Volver al perfil</a>
      </div>
    </div>
  </main>

  <script>
    //  Mostrar campos seg煤n acci贸n de usuario
    function mostrarAccionUsuario() {
      const seleccion = document.getElementById("accionUsuario").value;
      document.getElementById("seccionUsuario").classList.remove("oculto");
      ["crearUsuario", "editarUsuario", "eliminarUsuario"].forEach(id => {
        document.getElementById(id).classList.add("oculto");
      });
      if (seleccion) document.getElementById(seleccion + "Usuario").classList.remove("oculto");
    }

    //  Mostrar panel de estad铆sticas
    function mostrarEstadistica() {
      const seleccion = document.getElementById("tipoEstadistica").value;
      document.getElementById("panelEstadisticas").classList.remove("oculto");
      ["estadisticaUsuarios", "estadisticaMateriales", "estadisticaPrestamos"].forEach(id => {
        document.getElementById(id).classList.add("oculto");
      });
      if (seleccion) document.getElementById("estadistica" + seleccion.charAt(0).toUpperCase() + seleccion.slice(1)).classList.remove("oculto");
    }

    //  Mensaje de confirmaci贸n
    function mostrarMensaje(e) {
      e.preventDefault();
      document.getElementById("popupExito").classList.remove("popup-oculto");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    //  Activar modo oscuro si estaba guardado
    if (localStorage.getItem("tema") === "oscuro") {
      document.body.classList.add("tema-oscuro");
    }
  </script>
</body>
</html>
