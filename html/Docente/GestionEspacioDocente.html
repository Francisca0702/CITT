<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CITT - Calendario General</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="../../css/NavBarDocente.css">
  <link rel="stylesheet" href="../../css/NavBar.css">

  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet" />

  <!-- Estilos propios de esta vista -->
  <link rel="stylesheet" href="../../css/CalendarioCoordinador.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>
</head>

<body data-vista="coordinador" data-rol="admin">

  <header id="navbar"></header>

  <script>
    fetch("../Docente/NavBarDocente.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("navbar").innerHTML = html;

        // MODO OSCURO igual que en HomeCoordinador / GestiónReservas
        const interruptorTema = document.getElementById("interruptorTema");

        if (localStorage.getItem("tema") === "oscuro") {
          document.body.classList.add("tema-oscuro");
          if (interruptorTema) interruptorTema.checked = true;
        }

        if (interruptorTema) {
          interruptorTema.addEventListener("change", () => {
            if (interruptorTema.checked) {
              document.body.classList.add("tema-oscuro");
              localStorage.setItem("tema", "oscuro");
            } else {
              document.body.classList.remove("tema-oscuro");
              localStorage.setItem("tema", "claro");
            }
          });
        }

        // Marcar el link del calendario como activo (ajusta data-link si tu navbar usa otro)
        const linkCalendario = document.querySelector('[data-link="calendario"]');
        if (linkCalendario) {
          linkCalendario.classList.add("activo");
        }
      });
  </script>

  <main class="contenedor-pagina">
    <!-- Calendario de reservas -->
    <section id="calendario-admin" class="card" aria-label="Calendario de reservas">
      <h2 class="seccion-titulo">Calendario de reservas CITT</h2>
      <div id="calendar"></div>
    </section>

    <!-- Modal de detalle (solo visualización) -->
    <div id="overlayDetalle" class="overlay-detalle" aria-hidden="true">
      <div class="detalle-card" role="dialog" aria-modal="true" aria-labelledby="detalleTitulo">
        <button type="button" class="detalle-cerrar" id="btnCerrarDetalle" aria-label="Cerrar detalle">&times;</button>
        <h3 id="detalleTitulo">Detalle de la reserva</h3>
        <div id="detalleContenido"></div>
      </div>
    </div>
  </main>

  <!-- Scripts FullCalendar -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/locales-all.global.min.js"></script>

  <!-- Script de esta vista (solo lectura) -->
  <!-- Ajusta la ruta si lo guardas en otra carpeta -->
  <script src="../../js/CalendarioCoordinador.js"></script>
</body>
</html>
